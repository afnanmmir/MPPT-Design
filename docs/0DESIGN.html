<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>v0&period;1&period;0 DESIGN</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension bierner.markdown-checkbox */
.contains-task-list {
    padding-left: 0;
}

.contains-task-list li {
    margin-left: 24px;
}

.contains-task-list .task-list-item {
    list-style: none;
    padding-left: 0;
    margin-left: 0;
}

.contains-task-list .contains-task-list {
    padding-left: 20px;
} 
</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="v010-design">v0.1.0 DESIGN</h1>
<hr>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#v010-design">v0.1.0 DESIGN</a>
<ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#system-design-requirements">System Design Requirements</a>
<ul>
<li><a href="#input">Input</a></li>
<li><a href="#output">Output</a></li>
<li><a href="#user-specifications">User Specifications</a></li>
</ul>
</li>
<li><a href="#hand-design">Hand Design</a>
<ul>
<li><a href="#switch-selection">Switch Selection</a></li>
<li><a href="#input-and-output-capacitor-selection">Input and Output Capacitor Selection</a></li>
<li><a href="#inductor-selection">Inductor Selection</a>
<ul>
<li><a href="#hand-designed-process">Hand Designed Process</a></li>
<li><a href="#reverse-engineered-process">Reverse Engineered Process</a></li>
</ul>
</li>
<li><a href="#layout">Layout</a></li>
<li><a href="#simulation-results">Simulation Results</a></li>
<li><a href="#experimental-results">Experimental Results</a></li>
</ul>
</li>
<li><a href="#automated-design">Automated Design</a>
<ul>
<li><a href="#optimizer-design-output">Optimizer Design Output</a>
<ul>
<li><a href="#capacitor-fom">Capacitor FOM</a></li>
<li><a href="#inductor-optimization">Inductor Optimization</a></li>
</ul>
</li>
<li><a href="#optimizer-simulation-output">Optimizer Simulation Output</a></li>
</ul>
</li>
<li><a href="#conclusion-and-further-work">Conclusion and Further Work</a></li>
</ul>
</li>
</ul>
<hr>
<h2 id="introduction">Introduction</h2>
<p>This document outlines the design process and results of two comparable MPPT
designs; one that was developed by hand and validated experimentally; the other
generated by our optimization algorithm pipeline.</p>
<hr>
<h2 id="system-design-requirements">System Design Requirements</h2>
<hr>
<h3 id="input">Input</h3>
<p>We define the input of the MPPT to be a solar array, consisting of a large
number of photovoltaic cells strung in series with bypass diodes across each
cluster of cells. This solar array, in optimal conditions (STC = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>25</mn><mtext> </mtext><mi>C</mi></mrow><annotation encoding="application/x-tex">25 \, C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">25</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>,
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1000</mn><mfrac><mi>W</mi><msup><mi>m</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">1000 \frac{W}{m^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord">1000</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>), shall have the following characteristics.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
<th>Units</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cell Specific</td>
<td></td>
<td></td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>O</mi><mi>C</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{OC}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">OC</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>0.721</td>
<td>V</td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>S</mi><mi>C</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{SC}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">SC</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>6.15</td>
<td>A</td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>M</mi><mi>P</mi><mi>P</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{MPP}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">MPP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>0.621</td>
<td>V</td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>M</mi><mi>P</mi><mi>P</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{MPP}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">MPP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>5.84</td>
<td>A</td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>M</mi><mi>P</mi><mi>P</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{MPP}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">MPP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>3.63</td>
<td>W</td>
</tr>
<tr>
<td>Array Specific</td>
<td></td>
<td></td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mrow><mi>C</mi><mi>E</mi><mi>L</mi><mi>L</mi><mi>S</mi></mrow></msub></mrow><annotation encoding="application/x-tex">N_{CELLS}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.109em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">CE</span><span class="mord mathnormal mtight">LL</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>111</td>
<td></td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>O</mi><mi>C</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{OC}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">OC</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>80.031</td>
<td>V</td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>S</mi><mi>C</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{SC}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">SC</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>6.15</td>
<td>A</td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>M</mi><mi>P</mi><mi>P</mi></mrow></msub></mrow><annotation encoding="application/x-tex">V_{MPP}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">MPP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>68.931</td>
<td>V</td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>M</mi><mi>P</mi><mi>P</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{MPP}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">MPP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>5.84</td>
<td>A</td>
</tr>
<tr>
<td><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>M</mi><mi>P</mi><mi>P</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{MPP}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">MPP</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></td>
<td>402.56</td>
<td>W</td>
</tr>
</tbody>
</table>
<p>A specification of the cell characteristics and the model output used for this
design is shown below.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/images/maxeon_gen_iii_cell_characteristics.png" alt="Maxeon Gen III Cell
Characteristics">
<img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/images/nonideal_model.png" alt="Nonideal Cell Model"></p>
<hr>
<h3 id="output">Output</h3>
<p>We define the output of the MPPT to be a LiMnNi battery pack, with a voltage
range of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>B</mi><mi>A</mi><mi>T</mi><mi>T</mi></mrow></msub><mo>∈</mo><mo stretchy="false">[</mo><mn>80</mn><mo separator="true">,</mo><mn>134.4</mn><mo stretchy="false">]</mo><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">V_{BATT} \in [80, 134.4] \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">TT</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">80</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">134.4</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>. We assume a maximum charging current
of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mtext> </mtext><mi>A</mi></mrow><annotation encoding="application/x-tex">10 \, A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">10</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">A</span></span></span></span> at any charge voltage, for lack of a better model.</p>
<hr>
<h3 id="user-specifications">User Specifications</h3>
<p>Using the above input and output, we define the user specifications as follows:</p>
<pre><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;NAME&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Broad range MPPT&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;AUTHORS&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;Matthew Yu&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;Jacob Pustilnik&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;DESCRIPTION&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MPPT Boost Converter v0.1.0&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;DATE_DESIGNED&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;05/07/23&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;DESIGN&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;input_source&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;source_model_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;solar_cell&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;cell_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Maxeon Gen III Bin Le1&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;num_cells&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">111</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;r_sh&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">40</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;r_s&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.0035</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;inp_ripple (V)&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0.725</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;user_v_range&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">20.335</span><span class="hljs-punctuation">,</span> <span class="hljs-number">74.481</span><span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;output_sink&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;sink_model_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;battery&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;battery_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;INR21700-M50LT&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;num_cells&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">32</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;out_ripple (V)&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.0</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;user_v_range&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">80</span><span class="hljs-punctuation">,</span> <span class="hljs-number">130</span><span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;safety_factor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1.25</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>We specify the shunt resistance and series resistance of the solar cell model as
based on empirical data with the I-V Curve Tracer testing setup.</p>
<p>We define the input voltage range to be <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mrow><mi>A</mi><mi>R</mi><mi>R</mi></mrow></msub><mo>∈</mo><mo stretchy="false">[</mo><mn>20.335</mn><mo separator="true">,</mo><mn>74.481</mn><mo stretchy="false">]</mo><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">V_{ARR} \in [20.335, 74.481] \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.00773em;">RR</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">20.335</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">74.481</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>
during the hand-design process to minimize switch stress and improve system
efficiency.</p>
<p>The input voltage peak-to-peak specification is slightly less than <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mtext> </mtext><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">1 \,\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">%</span></span></span></span> of the
maximum input voltage (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>74.481</mn><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">74.481 \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">74.481</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>).</p>
<p>The output voltage peak-to-peak specification is a conservative estimate of the
requirements of the LHR Solar BPS system. They did not give us a concrete number
(or any number, really), so we surmised that a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mtext> </mtext><msub><mi>V</mi><mrow><mi>p</mi><mi>p</mi></mrow></msub></mrow><annotation encoding="application/x-tex">1 \, V_{pp}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">pp</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> ripple should be
sufficient. This also means that for continuous transfer of energy in the
direction of the BPS, the output voltage of the system must be greater than the
voltage of the load plus the half of the ripple. A smaller ripple would allow us
to get closer to the load voltage and can marginally reduce switching stress.</p>
<p>The inductor current peak-to-peak specification is based on the typical <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn><mtext> </mtext><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">20\,\%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">20</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">%</span></span></span></span>
current ripple ratio used in converters. It was increased to about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>22.358</mn><mtext> </mtext><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">22.358\, \%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">22.358</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">%</span></span></span></span>
due to the optimization process.</p>
<p>We use a safety factor of 1.25 to reduce system risk and improve operational
lifetime.</p>
<hr>
<h2 id="hand-design">Hand Design</h2>
<p>The first version of this converter, version 0.1.0, was hand designed from
scratch. The following subsections discusses the methodology behind the design,
the expected and actual performance, and ultimately how it informs the automated
design process.</p>
<hr>
<h3 id="switch-selection">Switch Selection</h3>
<p>The main consideration for switch selection is the switching frequency relative
to the power loss; a better switch relative to another will have a higher
switching frequency for the same or less power consumption. Additionally, a
higher switching frequency has knock-on effects for passive selection; it
reduces the effective ripple experienced by the inductors and capacitors and
reduces their energy storage requirements.</p>
<p>One way to quantize switch performance is to use a Figure of Merit (FOM). The
established FOM for MOSFETs is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi><mo>=</mo><msub><mi>R</mi><mrow><mi>D</mi><mi>S</mi><mo separator="true">,</mo><mi>O</mi><mi>N</mi></mrow></msub><mo>∗</mo><msub><mi>C</mi><mrow><mi>O</mi><mi>S</mi><mi>S</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\tau = R_{DS,ON} * C_{OSS}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">ON</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">OSS</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>; a lower <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>τ</mi></mrow><annotation encoding="application/x-tex">\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.1132em;">τ</span></span></span></span>
indicates a better switch.</p>
<p>We investigated a set of GaN switches, extracting <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mrow><mi>D</mi><mi>S</mi><mo separator="true">,</mo><mi>O</mi><mi>N</mi></mrow></msub></mrow><annotation encoding="application/x-tex">R_{DS,ON}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">ON</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> values at <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>25</mn><mtext> </mtext><mi>C</mi></mrow><annotation encoding="application/x-tex">25 \,C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">25</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>
and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>125</mn><mtext> </mtext><mi>C</mi></mrow><annotation encoding="application/x-tex">125 \, C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">125</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi>O</mi><mi>S</mi><mi>S</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{OSS}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">OSS</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> values at <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">0 \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>150</mn><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">150 \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">150</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>. Taking the
average of these values, we established the FOM in <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">ps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">s</span></span></span></span>.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/images/gan_fets.png" alt="GaN FETs"></p>
<p>To determine the optimal switch, we took the top 12.5 percentile FOM and mapped
the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mrow><mi>D</mi><mi>S</mi><mo separator="true">,</mo><mi>O</mi><mi>N</mi></mrow></msub></mrow><annotation encoding="application/x-tex">R_{DS,ON}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">ON</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> vs <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mrow><mi>S</mi><mi>W</mi><mo separator="true">,</mo><mi>M</mi><mi>A</mi><mi>X</mi></mrow></msub></mrow><annotation encoding="application/x-tex">F_{SW,MAX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.07847em;">X</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> for a given power budget for various operating
points.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/fom_f_sw_map.png" alt="FOM Mapping"></p>
<p>We see that the worst case plot is when the input voltage is minimized and the
output voltage is maximized. At an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mrow><mi>D</mi><mi>S</mi><mo separator="true">,</mo><mi>O</mi><mi>N</mi></mrow></msub></mrow><annotation encoding="application/x-tex">R_{DS,ON}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">ON</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> of about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>19</mn><mtext> </mtext><mi>m</mi><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">19 \, m\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">19</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mord">Ω</span></span></span></span>. We
maximize the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mrow><mi>S</mi><mi>W</mi></mrow></msub></mrow><annotation encoding="application/x-tex">F_{SW}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> at around <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>104</mn><mtext> </mtext><mi>k</mi><mi>H</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">104 \, kHz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">104</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.04398em;">Hz</span></span></span></span>. It can be intuited that
an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mrow><mi>D</mi><mi>S</mi><mo separator="true">,</mo><mi>O</mi><mi>N</mi></mrow></msub></mrow><annotation encoding="application/x-tex">R_{DS,ON}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">ON</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> ratio to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mrow><mi>O</mi><mi>S</mi><mi>S</mi></mrow></msub></mrow><annotation encoding="application/x-tex">C_{OSS}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">OSS</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> is slightly more important than the overall
FOM value.</p>
<p>As such, the ideal candidate for the design is the EPC2207, which has the
closest <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mrow><mi>D</mi><mi>S</mi><mo separator="true">,</mo><mi>O</mi><mi>N</mi></mrow></msub></mrow><annotation encoding="application/x-tex">R_{DS,ON}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">ON</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> at the lowest FOM. This was not available at the time of
design, so the next closest candidate, the EPC2307 was chosen.</p>
<p>Rerunning the calculations of max lower bound <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mrow><mi>S</mi><mi>W</mi></mrow></msub></mrow><annotation encoding="application/x-tex">F_{SW}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> for a given power budget,
we achieved a switching frequency of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>104</mn><mtext> </mtext><mi>k</mi><mi>H</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">104 \, kHz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">104</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.04398em;">Hz</span></span></span></span>.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/frequency_operation_map.png" alt=" Mapping"></p>
<hr>
<h3 id="input-and-output-capacitor-selection">Input and Output Capacitor Selection</h3>
<p>The input and output capacitor selection depends on several parameters:</p>
<ul>
<li>the required capacitance needed to reduce ripple to below the design
specification at the worst case operating point,</li>
<li>the ripple current that needs to be supported by the set of capacitors,</li>
<li>and the loss due to ESR and leakage current.</li>
</ul>
<p>The first and second parameters are the constraining function of the capacitor
selection, while the third parameter is the optimization function of the
capacitor selection.</p>
<p>Given the switching frequency of the device, we simulated the minimum
capacitance (and inductance) required to hit the target ripple across the I/O
mapping of the device.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/capacitor_inductor_sizing_map.png" alt="Passive Sizing Mapping"></p>
<p>We noted a minimum required input capacitance of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5.5</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">5.5 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">5.5</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> and output capacitance
of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>15.2</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">15.2 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">15.2</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> in order to meet or beat our ripple target across the I/O mapping
of the device.</p>
<p>From this, we selected capacitors for bulk capacitance and hf capacitance.
The input capacitor consisted of a single aluminum organic polymer electrolytic
capacitor A759KS156M2AAAE52, with a capacitance of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>15</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">15 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">15</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>. The output capacitors
consisted of two aluminum organic polymer electrolytic capacitors
A759MS186M2CAAE90, with a capacitance of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>18</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">18 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">18</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>. These bulk capacitances are well
beyond the required capacitance and thus we predict that the expected ripple
will be tighter than required.</p>
<p>We also selected a hf switching node MLCC capacitor to reduce switching noise,
the CGA9P3X7T2E225MA, with a capacitance of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2.2</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">2.2 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">2.2</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>. At <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>125</mn><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">125 \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">125</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> DC bias and
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>125</mn><mtext> </mtext><mi>C</mi></mrow><annotation encoding="application/x-tex">125 \, C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">125</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>, the capacitance derating goes down to slightly above <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">1 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>. At
about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mtext> </mtext><mi>k</mi><mi>H</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">100 \, kHz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">100</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.04398em;">Hz</span></span></span></span>, the ESR is about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5.5</mn><mtext> </mtext><mi>m</mi><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">5.5 \, m\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">5.5</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">m</span><span class="mord">Ω</span></span></span></span>.</p>
<hr>
<h3 id="inductor-selection">Inductor Selection</h3>
<p>The inductor selection consists of two components; the inductor core geometry,
and the inductor core material. An ideal inductor is one that minimizes volume
and wire length while keeping losses low.</p>
<p>The minimum inductance calculated by the procedure above was <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>109.2</mn><mtext> </mtext><mi>μ</mi><mi>H</mi></mrow><annotation encoding="application/x-tex">109.2 \, \mu H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">109.2</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span>.</p>
<p>It must be noted here that the hand-designed process for calculating the
inductance neglected core gap, which caused issues during the experimental
testing. Below we will present the results of the flawed calculation versus the
reverse engineered variant using the automated design system.</p>
<hr>
<h4 id="hand-designed-process">Hand Designed Process</h4>
<p>With a target <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>110</mn><mtext> </mtext><mi>μ</mi><mi>H</mi></mrow><annotation encoding="application/x-tex">110 \, \mu H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">110</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span> inductance, the hand-designed process generated a
design using the EPCOS/TDK PQ26/25, 3C97 core, the B65877A0000R097. It required
35 turns with a wire gauge of 21 AWG.</p>
<p>This results in a estimated conduction loss of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4.5</mn><mtext> </mtext><mi>W</mi></mrow><annotation encoding="application/x-tex">4.5 \, W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">4.5</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> and core loss of
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.2</mn><mtext> </mtext><mi>W</mi></mrow><annotation encoding="application/x-tex">0.2 \, W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">0.2</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>.</p>
<hr>
<h4 id="reverse-engineered-process">Reverse Engineered Process</h4>
<p>Using the same core, the algorithm determined that the inductor requires 31
turns of 19 AWG wire with a core gap of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1.0</mn><mtext> </mtext><mi>m</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">1.0 \, mm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1.0</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">mm</span></span></span></span> per side of the core.</p>
<p>This results in an estimated conduction loss of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.3</mn><mtext> </mtext><mi>W</mi></mrow><annotation encoding="application/x-tex">0.3 \, W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">0.3</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> and a core loss of
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.03</mn><mtext> </mtext><mi>W</mi></mrow><annotation encoding="application/x-tex">0.03 \, W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">0.03</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>.</p>
<p>As can be seen, the reverse engineered process results in a much lower
conduction and core loss. Part of the changes between the two designs is that it
was determined experimentally that the 0.3 winding factor used for calculating
the number of turns that can fit around the core was an overly-conservative
estimate, this has been increased to 0.5. In tern, this allows for fitting a
thicker gauge wire which can significantly reduce conduction loss, which appears
to be the main mode of inductor loss during experimental testing.</p>
<hr>
<h3 id="layout">Layout</h3>
<p>This layout section discusses component placement in brief; it does not discuss
in detail all PCB design decisions. Matthew could give an hour lecture if you
ask him to :).</p>
<p>Not discussed in document in detail is the gate driver and PWM generator; the
TI LMG1210RVRR gate driver was chosen for our particular GaN FETs, and the
STM32L432KC is a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>80</mn><mtext> </mtext><mi>M</mi><mi>H</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">80 \, MHz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">80</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal" style="margin-right:0.04398em;">Hz</span></span></span></span> microcontroller with PWM outputs. The MCU is paired
with two voltage and current sensors at the ends of the power path for
measurement and closed loop control.</p>
<p>The digital and analog control and measurement circuitry is isolated on the
&quot;top&quot; half of the board layout; this is to prevent or reduce EMI from the
switching node and high current fluctuations.</p>
<p>The &quot;bottom&quot; half of the board layout is the power path; this is the DC-DC
converter and contains the capacitors, inductor, and switches. Components are
arranged relatively linearly to reduce the loop and shape complexity; the bulk
output capacitors can be slightly away from the switching loop but the HF
capacitor must be as close to the switches as possible. Likewise, the inductor
end must also be relatively close to the switches.</p>
<p>In our configuration, we put the switches side by side with the HF MLCC
capacitor directly underneath; this gives a very tight loop.</p>
<p>We also placed thermal jumpers between planes to help distribute heat. This is
accompanied by thermal and EMI stiching vias scattered across the board.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/v0_1_0_layout.png" alt="Layout">
<img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/v0_1_0_assembly.png" alt="Assembly"></p>
<hr>
<h3 id="simulation-results">Simulation Results</h3>
<p>The following graphs are generated from the automated design system with the
chosen devices provided as parameters.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/00_source_model.png" alt="Source Model"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/01_sink_model.png" alt="Sink Model"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/02_duty_cycle_map.png" alt="Duty Cycle Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/03_current_map.png" alt="Current Transfer Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/04_power_map.png" alt="Power Transfer Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/05_sw_losses_map.png" alt="Switch Losses Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/06_sw_thermal_map.png" alt="Switch Thermal Sizing"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/07_sw_deadtime_map.png" alt="Switch Deadtime Sizing"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/08_passive_ripple_map.png" alt="Passive Ripple Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/09_passive_losses_map.png" alt="Passive Losses Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/10_efficiency_map.png" alt="Efficiency Map"></p>
<p>We note that the total power loss derived from the hand-picked design is
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>7.63</mn><mtext> </mtext><mi>W</mi></mrow><annotation encoding="application/x-tex">7.63 \, W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">7.63</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>, at the highest switching stress operating point: min input voltage,
max output voltage. This results in a minimum transfer efficiency of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>93.92</mn><mtext> </mtext><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">93.92 \, \%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">93.92</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">%</span></span></span></span>.</p>
<p>At this operating point the switch conduction loss and switching loss peaks,
contributing to about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3.60</mn><mtext> </mtext><mi>W</mi></mrow><annotation encoding="application/x-tex">3.60 \, W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">3.60</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> of loss each, with the inductor and output
capacitor providing the majority of the rest (generally through output capacitor
leakage loss and inductor conduction loss).</p>
<p>We also note that minimum required area needed to maintain both switches below
the maximum rated temperature time the 1 / safety factor starting from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>60</mn><mtext> </mtext><mi>C</mi></mrow><annotation encoding="application/x-tex">60 \, C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">60</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> is
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>70.893</mn><mtext> </mtext><mi>c</mi><msup><mi>m</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">70.893 \, cm^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">70.893</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>. The layout design has a total surface area of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>110</mn><mtext> </mtext><mi>c</mi><msup><mi>m</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">110 \, cm^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">110</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>,
which is should be sufficient for cooling without an external heatsink.</p>
<hr>
<h3 id="experimental-results">Experimental Results</h3>
<p>Note for the purposes of the experimental testing, we ran the device at
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>100</mn><mtext> </mtext><mi>k</mi><mi>H</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">100 \, kHz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">100</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.04398em;">Hz</span></span></span></span>.</p>
<p>We also used an inductor wound at <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>155</mn><mtext> </mtext><mi>μ</mi><mi>H</mi></mrow><annotation encoding="application/x-tex">155 \, \mu H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">155</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span>, with about 30 turns of AWG 21
wires, and a gap on each side of the core of roughly <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.318</mn><mtext> </mtext><mi>m</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">0.318 \, mm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0.318</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">mm</span></span></span></span>.</p>
<p>We obtained the following experimental results:</p>
<table>
<thead>
<tr>
<th>Vin (V)</th>
<th>Vout (V)</th>
<th>Pout (W)</th>
<th>Eff (%)</th>
<th>Pdensity (W/cm3)</th>
<th>Vin, p-p (V)</th>
<th>Vout, p-p (V)</th>
<th>Il, p-p (A)</th>
</tr>
</thead>
<tbody>
<tr>
<td>67.524 (69)</td>
<td>102.02 (105)</td>
<td>380.87 (400)</td>
<td>98.972</td>
<td>1.979</td>
<td>0.234</td>
<td>0.309</td>
<td>1.820</td>
</tr>
<tr>
<td>Broad range tests</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>18.752</td>
<td>73.242</td>
<td>83.154</td>
<td>97.349</td>
<td>0.432</td>
<td>0.226</td>
<td>0.365</td>
<td>1.159</td>
</tr>
<tr>
<td>18.825</td>
<td>96.73</td>
<td>84.416</td>
<td>97.032</td>
<td>0.439</td>
<td>0.249</td>
<td>0.402</td>
<td>1.263</td>
</tr>
<tr>
<td>18.823</td>
<td>119.35</td>
<td>83.889</td>
<td>96.531</td>
<td>0.436</td>
<td>0.330</td>
<td>0.510</td>
<td>1.440</td>
</tr>
<tr>
<td>38.805</td>
<td>76.688</td>
<td>181.72</td>
<td>98.616</td>
<td>0.944</td>
<td>0.270</td>
<td>0.356</td>
<td>1.520</td>
</tr>
<tr>
<td>38.782</td>
<td>100.8</td>
<td>182.74</td>
<td>98.348</td>
<td>0.949</td>
<td>0.295</td>
<td>0.412</td>
<td>1.959</td>
</tr>
<tr>
<td>38.78</td>
<td>124.54</td>
<td>182.34</td>
<td>98.083</td>
<td>0.947</td>
<td>0.336</td>
<td>0.489</td>
<td>2.199</td>
</tr>
<tr>
<td>58.798</td>
<td>77.774</td>
<td>279.2</td>
<td>99.103</td>
<td>1.450</td>
<td>0.249</td>
<td>0.348</td>
<td>1.280</td>
</tr>
<tr>
<td>58.76</td>
<td>102.01</td>
<td>281.43</td>
<td>98.904</td>
<td>1.462</td>
<td>0.299</td>
<td>0.411</td>
<td>2.000</td>
</tr>
<tr>
<td>58.741</td>
<td>126.28</td>
<td>282.55</td>
<td>98.671</td>
<td>1.468</td>
<td>0.346</td>
<td>0.495</td>
<td>2.480</td>
</tr>
<tr>
<td>67.592</td>
<td>77.744</td>
<td>371.13</td>
<td>99.146</td>
<td>1.928</td>
<td>0.149</td>
<td>0.278</td>
<td>0.840</td>
</tr>
<tr>
<td>67.524</td>
<td>102.02</td>
<td>380.87</td>
<td>98.972</td>
<td>1.979</td>
<td>0.234</td>
<td>0.309</td>
<td>1.820</td>
</tr>
<tr>
<td>67.471</td>
<td>126.19</td>
<td>375.78</td>
<td>98.782</td>
<td>1.952</td>
<td>0.265</td>
<td>0.325</td>
<td>2.540</td>
</tr>
<tr>
<td>74.612</td>
<td>79.447</td>
<td>97.746</td>
<td>99.071</td>
<td>0.508</td>
<td>0.217</td>
<td>0.428</td>
<td>0.580</td>
</tr>
<tr>
<td>74.609</td>
<td>104.35</td>
<td>98.194</td>
<td>98.484</td>
<td>0.510</td>
<td>0.226</td>
<td>0.419</td>
<td>1.640</td>
</tr>
<tr>
<td>74.606</td>
<td>129.25</td>
<td>98.805</td>
<td>97.806</td>
<td>0.513</td>
<td>0.273</td>
<td>0.457</td>
<td>2.359</td>
</tr>
</tbody>
</table>
<p>We note that the switching noise was minimal, indicating that the switching node
layout was optimized well enough to not severely impact the design results.</p>
<p>We measured a worst I/O mapping efficiency (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>18.8</mn><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">18.8 \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">18.8</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>119.3</mn><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">119.3 \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">119.3</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>) of
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>96.5</mn><mtext> </mtext><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">96.5 \, \%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">96.5</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">%</span></span></span></span>, exceeding our expected lower bound. We measured a best I/O mapping
efficiency (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>67.6</mn><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">67.6 \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">67.6</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span> to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>77.7</mn><mtext> </mtext><mi>V</mi></mrow><annotation encoding="application/x-tex">77.7 \, V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">77.7</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span>) of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>99.1</mn><mtext> </mtext><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">99.1 \, \%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">99.1</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">%</span></span></span></span>, within measurement error
to meet our upper bound.</p>
<p>We do not meet our simulated ripple results, potentially due the following
factors, but still comfortably beat our ripple specifications by up to 50%.</p>
<ul>
<li>measurement error (using oscilloscope)</li>
<li>switching noise</li>
<li>change in inductor design</li>
</ul>
<p>We observe that the experimental data power loss map shows deviations from
simulation; if we observe the trend of loss increase across each axis, the
underlying switching and conduction loss agree. In between however, some
datapoints exceed expectations and have larger losses than can be explained by
simulations (although some may be attributable to inductor loss at the input
MPP).</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/experimental_power_map.png" alt="Power Loss Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/experimental_efficiency_map.png" alt="Efficiency Map"></p>
<p>Thermal wise, the losses were expected to be in two main components: the
switches and inductor. According to the thermal images, this shows up as
expected. The maximum recorded temperature of the switch devices was <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>60</mn><mtext> </mtext><mi>C</mi></mrow><annotation encoding="application/x-tex">60 \, C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">60</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>,
from am ambient of about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>20</mn><mtext> </mtext><mi>C</mi></mrow><annotation encoding="application/x-tex">20 \, C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">20</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span>, the 40 degree temperature increase is in
line with the anticipated loss at that particular operating point (~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3.6</mn><mtext> </mtext><mi>W</mi></mrow><annotation encoding="application/x-tex">3.6 \, W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">3.6</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>).</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/hand_picked/thermal_images.png" alt="Thermal Images"></p>
<hr>
<h2 id="automated-design">Automated Design</h2>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/images/optimizer_block_diagram.svg" alt="Optimizer Block Diagram"></p>
<p>An automated design optimizer algorithm was developed to speed up and improve
the design process outlined by the hand designed procedures.</p>
<p>A design specification file and a list of design components are provided, in
which the optimizer chooses the optimal parts and calculates the operating
parameters that maximizes system efficiency.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/images/optimizer_constraints_and_parameters.svg" alt="Optimizer Parameters and
Constraints"></p>
<p>The optimizer controls two parameters: the power budget allocated to each switch
and the inductor current ripple ratio. The user maintains constraints, including
the input voltage and output voltage range, or the safety factor of the design.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/images/optimizer_algorithm.svg" alt="Optimizer Algorithm"></p>
<p>As outlined in the optimizer algorithm, every design iteration starts with a
selection on the switch power budget and the inductor current ripple ratio. The
algorithm first determines the switch and the switching frequency before
selecting for an optimal set of capacitors and then the inductor configuration.
Finally, the overall worst case power loss is determined before repeating the
loop.</p>
<p>After many iterations, the optimizer settles on the parameters that lead to the
highest efficiency design. The output of these parameters results in the
selection of design components for use.</p>
<p>The automated design was ran on the same specification file and user constraints
as defined in the hand-designed section.</p>
<hr>
<h3 id="optimizer-design-output">Optimizer Design Output</h3>
<p>It was evaluated that the optimal parameter values that led to the ideal design
was an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>L</mi></msub></mrow><annotation encoding="application/x-tex">R_{L}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> of 0.119 and a <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mrow><mi>S</mi><mi>W</mi><mi mathvariant="normal">_</mi><mi>B</mi><mi>U</mi><mi>D</mi></mrow></msub></mrow><annotation encoding="application/x-tex">P_{SW\_BUD}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0503em;vertical-align:-0.367em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">W</span><span class="mord mtight" style="margin-right:0.02778em;">_</span><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">U</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span></span></span></span></span></span></span></span></span></span> of 2.13 W.</p>
<p>The switches chosen were the EPC2207 (now in stock), which had an optimal
frequency of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>95</mn><mtext> </mtext><mi>k</mi><mi>H</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">95 \, kHz</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">95</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord mathnormal" style="margin-right:0.04398em;">Hz</span></span></span></span>; this led to the following passive requirements:</p>
<ul>
<li>Input capacitance greater than <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2.67</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">2.67 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">2.67</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li>Output capacitance greater than <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>16.16</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">16.16 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">16.16</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li>Inductance greater than <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>280.51</mn><mtext> </mtext><mi>μ</mi><mi>H</mi></mrow><annotation encoding="application/x-tex">280.51 \, \mu H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">280.51</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span>.</li>
</ul>
<hr>
<h4 id="capacitor-fom">Capacitor FOM</h4>
<p>A custom FOM was developed for selecting optimal capacitors for the design. We
remind the reader of the parameters defined earlier in the hand-design section
for choosing capacitors:</p>
<blockquote>
<ul>
<li>the required capacitance needed to reduce ripple to below the design
specification at the worst case operating point,</li>
<li>the ripple current that needs to be supported by the set of capacitors,</li>
<li>and the loss due to ESR and leakage current.</li>
</ul>
<p>The first and second parameters are the constraining function of the capacitor
selection, while the third parameter is the optimization function of the
capacitor selection.</p>
</blockquote>
<p>Ideally, we want to choose as few capacitors as possible to meet the first two
parameters, but also minimize the third parameter. As this is a multi-objective
optimization problem, the brute force method would be to form the power set of
all candidate capacitors, filter the sets that do not meet the constraints, and
choose the smallest and most optimal set.</p>
<p>However, we propose the following FOM equation to speed up the process:</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>F</mi><mi>O</mi><mi>M</mi><mo>=</mo><mfrac><mrow><msub><mi>V</mi><mi>D</mi></msub><mo>∗</mo><mi>C</mi><mo>∗</mo><msub><mi>I</mi><mrow><mi>R</mi><mi>I</mi><mi>P</mi><mi>P</mi><mi>L</mi><mi>E</mi></mrow></msub></mrow><mrow><mi>E</mi><mi>S</mi><mi>R</mi><mo>∗</mo><msub><mi>I</mi><mrow><mi>L</mi><mi>E</mi><mi>A</mi><mi>K</mi><mi>A</mi><mi>G</mi><mi>E</mi></mrow></msub><mo>∗</mo><mi>C</mi><mi>O</mi><mi>S</mi><mi>T</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">FOM = \frac{V_{D} * C * I_{RIPPLE}}{ESR * I_{LEAKAGE} * COST}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">FOM</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1963em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">ESR</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">GE</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">COST</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.2222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span><span class="mord mathnormal mtight" style="margin-right:0.07847em;">I</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">PP</span><span class="mord mathnormal mtight">L</span><span class="mord mathnormal mtight" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p>
<p>As can be seen, this formula rewards higher constraints while punishing
undesirable aspects that affect power (and cost).</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/images/capacitors.png" alt="Capacitors"></p>
<p>A subset of capacitors with the FOM added is shown. We can see that the best FOM
capacitors tended to have reasonable capacitance, ripple, and cost, but low ESR,
and leakage.</p>
<p>Ultimately this worked well for this design, with the optimizer choosing the
HZA336M080G24T-F <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>33</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">33 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">33</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> aluminium electrolytic capacitor for the input
and the A759MS186M2CAAE090 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>18</mn><mtext> </mtext><mi>μ</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">18 \, \mu F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">18</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">μ</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span> aluminum organic polymer electrolytic
capacitor for the output.</p>
<hr>
<h4 id="inductor-optimization">Inductor Optimization</h4>
<p>The optimizer selected a slightly different core than the hand-design, a
PQ26/25-3C96 with 53 turns of 21 AWG wire. A core gap of 1.4 mm is suggested.</p>
<p>Inductor selection was performed with extra component listings for the core
shape and material: the material in particular provided constants calculated by
FerroxCube to calculate the core loss with Steinmetz' equation. This meant that
there was no need to manually infer the <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>V</mi></msub></mrow><annotation encoding="application/x-tex">P_{V}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> from the manufacturer datasheet
for our particular frequency, core shape, and temperature.</p>
<p>The optimization procedure only optimizes for loss, however; other parameters of
interest, like cost and core size are neglected in favor of the design with the
least conduction and core loss.</p>
<hr>
<h3 id="optimizer-simulation-output">Optimizer Simulation Output</h3>
<p>The following graphs are generated from the automated design system with the
chosen devices provided as parameters.</p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/00_source_model.png" alt="Source Model"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/01_sink_model.png" alt="Sink Model"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/02_duty_cycle_map.png" alt="Duty Cycle Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/03_current_map.png" alt="Current Transfer Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/04_power_map.png" alt="Power Transfer Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/05_sw_losses_map.png" alt="Switch Losses Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/06_sw_thermal_map.png" alt="Switch Thermal Sizing"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/07_sw_deadtime_map.png" alt="Switch Deadtime Sizing"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/08_passive_ripple_map.png" alt="Passive Ripple Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/09_passive_losses_map.png" alt="Passive Losses Map"></p>
<p><img src="file:////home/matthew/Documents/Github/MPPT-Design/docs/v0.1.0/automated/10_efficiency_map.png" alt="Efficiency Map"></p>
<p>We note that the total power loss derived from the automated design is
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5.04</mn><mtext> </mtext><mi>W</mi></mrow><annotation encoding="application/x-tex">5.04 \, W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">5.04</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span>, at the highest switching stress operating point: min input voltage,
max output voltage. This results in a minimum transfer efficiency of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>96.0</mn><mtext> </mtext><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">96.0 \, \%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">96.0</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">%</span></span></span></span>.</p>
<p>At this operating point the switch conduction loss and switching loss peaks,
contributing to about <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2.12</mn><mtext> </mtext><mi>W</mi></mrow><annotation encoding="application/x-tex">2.12 \, W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">2.12</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span></span></span></span> of loss each, with the inductor conduction
loss providing the rest.</p>
<p>We also note that minimum required area needed to maintain both switches below
the maximum rated temperature time the 1 / safety factor starting from <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>60</mn><mtext> </mtext><mi>C</mi></mrow><annotation encoding="application/x-tex">60 \, C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">60</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span> is
<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>35.546</mn><mtext> </mtext><mi>c</mi><msup><mi>m</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">35.546 \, cm^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">35.546</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mord"><span class="mord mathnormal">m</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>, a 2x improvement. This allows us to shrink the required
exposed thermal area by a significant margin, and should enable us to remove the
existing thermal jumpers.</p>
<p>Also notably improved is the dead time, with the majority of the design only
needing at most <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>12</mn><mi>n</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">12 ns</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">12</span><span class="mord mathnormal">n</span><span class="mord mathnormal">s</span></span></span></span> of deadtime.</p>
<p>We see that this automated design beats the reverse engineered hand-designed
version by at least <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mtext> </mtext><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">2 \, \%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">%</span></span></span></span>. The upper bound efficiency also improves
marginally. At the same time, our expected number of capacitors decreases, our
required thermal area shrinks, and thus we can remove extraneous components like
heat sinks, and thermal jumpers.</p>
<p>Judging by our empirical losses, it would be very positive if we can exceed our
lower bound efficiency estimate again.</p>
<hr>
<h2 id="conclusion-and-further-work">Conclusion and Further Work</h2>
<p>In conclusion, the overall system design is a good starting point towards
modeling DC-DC converters with only a few known parameters. A hand-designed
system is compared against a fully automated result, and the initial efficiency
results, both simulated and emperical, show high marks. The automated design
appears to improve upon the hand-designed converter by at least <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mtext> </mtext><mi mathvariant="normal">%</mi></mrow><annotation encoding="application/x-tex">2 \, \%</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8056em;vertical-align:-0.0556em;"></span><span class="mord">2</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">%</span></span></span></span> in the
worst operating regime, which is promising.</p>
<p>In this report, we do not discuss the open and closed loop stability of the
design. However, we have validated that the system is indeed open and closed
loop stable. Further work in this project will involve the small signal and
large signal stability analysis of the system to characterize the stability of
the system before comparing it against empirical stability.</p>
<p>In addition to this analysis, further effort should be performed to gather higher
resolution steady state efficiency. More experimental data points can help
inform the accuracy of the model and where the design process can be improved.</p>
<p>Further research into choosing an appropriate FOM should be performed.
While the proposed FOM works well for this design, it is likely not optimal in
all cases: a brute force solution should be determined as the golden reference,
and a PCA or curve fitting technique should be performed on the available
capacitor parameters to determine weightings for the values that match the golden
reference.</p>
<p>Finally, work into automating the decision of choosing HF capacitors should be
performed. This is slightly more difficult for MLCCs due to the data-intensive
work of gathering frequency vs impedance CSVs (and so forth) from manufacturers
that provide them, such as KEMET and TDK. However, their data can improve the
optimization process and provide useful insight into stability analysis due to
their effects on the design poles and holes.</p>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>